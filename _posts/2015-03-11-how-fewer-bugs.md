---

layout:     post
title:      "程序员如何做到「编程速度又快，Bug 数量又少」？"
subtitle:   "关心你的技艺"
categories: 心得
tags: [心得, tag]
header-img: "img/how-fewer-bugs.jpg"

---

## 关于一个给自己埋地雷的故事

最近看到一个[Quora](http://www.quora.com/How-do-I-train-myself-to-code-faster-and-with-fewer-bugs/answer/Glyn-Williams)中的回答，答到心坎上。译文引用自[伯乐在线](http://blog.jobbole.com/84159/)：

> 三个程序员被要求穿过一片田地，到达另一侧的房子。
> 
> 菜鸟程序员目测了一下之间很短的距离，说：“不远！我只要十分钟。”
> 
> 资深程序员看了一眼田地，想了一会，说：“我应该能在一天内过去。”菜鸟程序员很惊讶。
> 
> 大神程序员看了一眼田地，说：“看起来要十分钟，但我觉得十五分钟应该够了。” 资深程序员冷笑了一声。
> 
> 菜鸟程序员出发了，但只过了一会，地雷爆炸了，炸出了巨大的洞。这下他必须偏移预定的路线，原路返回，反复尝试穿过田地。最后他花了两天到达目的地，到的时候颤颤发抖，还受了伤。
> 
> 资深程序员一出发就匍匐前进，仔细地拍打地面，寻找地雷，只有在安全的时候才前进。他在一天的时间内小心谨慎地缓慢爬过了这片地，只触发了几个地雷。
> 
> 大神程序员出发之后径直穿过了田地，十分果断。他只用了十分钟就到了另一边。
> 
> “你是怎么做到的？”另外两个人问道，“那些地雷怎么没有伤到你？”
> 
> “很简单，”他回答道，“我最初就没有埋地雷。”

---

<br/>

## 地雷从何而来？

与大神一起工作的时候就是这种感觉，也是我的第一印象「代码整洁而且没有地雷」。可是反过来想，为什么有的人就是习惯于埋雷呢？难道看不到后果吗？再深一层来讲，没人愿意给自己埋地雷，主要还是没有对习惯引起重视。培养起好的编程习惯是非常重要的。编程中的坏习惯，是很多程序员上升的天花板，十年原地踏步的原因。想要写出好代码，一定要常常问自己「我还能做的更好吗？」(好吧，这是算法课的口号)。只有想不断提升的人，才会注意去扣各种各样的细节，使得自己做得比前一次好。下面总结一下，常见的「地雷」有哪些：


### 没有提前构建
* 没有规划完整系统的生命周期，内存泄露到处都是。
* 系统没有设计好，存在不少重复功能的类。
* 系统的行为没有定义好，接口设计不完整，写了创建不写删除。

### 没有重视代码的可读性
* 代码没有经过提炼，到处都是重复代码，改一个功能常常要改很多处代码。
* 缺少抽象，将具体实现暴露得到处都是。比如一个状态机在外部设置它的状态切换。
* 代码没有紧贴语义。

### 没有重视开发效率
* 到处都是繁杂重复的配置项，通过约定可以省去很多配置。
* 很多中间代码，比如解析xml、解析协议等等的工作，通过元编程可以将这些中间工作自动化。


### 没有重视数据
* 数据没有处理好，敏感数据要保护好，比如角色的属性，到处都是直接赋值的话，很容易出错，要把直接改变限制在少数的某几个函数里。
* 某些系统知道得太多，比如数据层就不应该知道显示层的东西，显示和数据掺杂在一起。
* 数据依赖于代码，比如写在C++的模板里面，没有为数据设计序列化文件。

### 没有测试
* TDD会加快编程速度，主要是分离关注点和缩短反馈周期。在一个大型系统里添加代码，如何确保你的代码按预期执行，测试显然是快速获得反馈的手段之一。`by Alex_L`

---

<br/>

## 更深层的原因


> ***“我不是什么伟大的程序员，我只是一个有着很多好习惯的程序员”----Kent Beck***

在《程序员修炼之道》里，第一条就是「关心你的技艺」。如果你不在乎能否漂亮地开发出软件，你又如何要耗费生命去开发软件呢？

<a href="http://book.douban.com/subject/5387402/">![](http://img5.douban.com/lpic/s6266036.jpg)</a>

